{"version":3,"sources":["webpack:///./src/components/Gallery.vue?27c4","webpack:///./src/components/GalleryItem.vue?cf92","webpack:///src/components/GalleryItem.vue","webpack:///./src/components/GalleryItem.vue?6f91","webpack:///./src/components/GalleryItem.vue","webpack:///src/components/Gallery.vue","webpack:///./src/components/Gallery.vue?bc64","webpack:///./src/components/Gallery.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","_s","heading","attrs","_l","splitPhoto","index","key","class","col1","col2","col3","photo","id","isLastPage","_e","status","on","onLoadMore","staticRenderFns","urls","small","fullName","user","links","html","profile_image","download","name","computed","last_name","props","Object","component","components","GalleryItem","Preloader","data","splitPhotos","heights","cols","methods","store","resizeHandler","window","innerWidth","resolveCols","newItems","forEach","resetCols","splice","indexOfMin","arr","length","item","min","minIndex","watch","photos","newPhotos","oldPhotos","newCols","oldCols","destroyed","removeEventListener","created","addEventListener"],"mappings":"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","file":"js/chunk-2d0bb1f1.b462ee92.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\"},[_c('h1',[_vm._v(_vm._s(_vm.heading))]),_c('div',{staticClass:\"flex items-start\",attrs:{\"id\":\"gallery\"}},_vm._l((_vm.splitPhotos),function(splitPhoto,index){return _c('div',{key:index,class:{ col1: index === 0, col2: index === 1, col3: index === 2 }},_vm._l((splitPhoto),function(photo){return _c('GalleryItem',{key:photo.id,attrs:{\"photo\":photo}})}),1)}),0),(!_vm.isLastPage)?_c('div',{staticClass:\"text-center my-10\"},[(_vm.status === 'updating')?_c('Preloader'):_c('div',{staticClass:\"btn-large waves-effect waves-light grey darken-4\",on:{\"click\":_vm.onLoadMore}},[_vm._v(\" Load more \"),_c('i',{staticClass:\"material-icons right\"},[_vm._v(\"arrow_forward\")])])],1):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"photo\"},[_c('router-link',{staticClass:\"block\",attrs:{\"to\":(\"/photos/\" + (_vm.photo.id))}},[_c('img',{staticClass:\"photo__img\",attrs:{\"src\":_vm.photo.urls.small,\"alt\":'By ' + _vm.fullName}})]),_c('a',{staticClass:\"user\",attrs:{\"href\":_vm.photo.user.links.html,\"target\":\"_blank\",\"rel\":\"noopener noreferrer\"}},[_c('img',{staticClass:\"rounded-full\",attrs:{\"src\":_vm.photo.user.profile_image.small,\"alt\":\"\"}}),_vm._v(\" \"+_vm._s(_vm.fullName)+\" \")]),_c('a',{staticClass:\"download\",attrs:{\"href\":_vm.photo.links.download,\"target\":\"_blank\",\"rel\":\"noopener noreferrer\"}},[_c('i',{staticClass:\"material-icons\"},[_vm._v(\"file_download\")])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"photo\">\r\n    <router-link class=\"block\" :to=\"`/photos/${photo.id}`\">\r\n      <img class=\"photo__img\" :src=\"photo.urls.small\" :alt=\"'By ' + fullName\" />\r\n    </router-link>\r\n    <a\r\n      :href=\"photo.user.links.html\"\r\n      target=\"_blank\"\r\n      rel=\"noopener noreferrer\"\r\n      class=\"user\"\r\n    >\r\n      <img class=\"rounded-full\" :src=\"photo.user.profile_image.small\" alt=\"\" />\r\n\r\n      {{ fullName }}\r\n    </a>\r\n\r\n    <a\r\n      :href=\"photo.links.download\"\r\n      target=\"_blank\"\r\n      rel=\"noopener noreferrer\"\r\n      class=\"download\"\r\n      ><i class=\"material-icons\">file_download</i></a\r\n    >\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'GalleryItem',\r\n  computed: {\r\n    fullName: function() {\r\n      let name = this.photo.user.first_name\r\n      if (this.photo.user.last_name) {\r\n        name += ' ' + this.photo.user.last_name\r\n      }\r\n      return name\r\n    },\r\n  },\r\n  props: {\r\n    photo: Object,\r\n  },\r\n}\r\n</script>\r\n\r\n<style></style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GalleryItem.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GalleryItem.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./GalleryItem.vue?vue&type=template&id=d9fc050e&\"\nimport script from \"./GalleryItem.vue?vue&type=script&lang=js&\"\nexport * from \"./GalleryItem.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div class=\"container\">\r\n    <h1>{{ heading }}</h1>\r\n    <div id=\"gallery\" class=\"flex items-start\">\r\n      <div\r\n        v-for=\"(splitPhoto, index) in splitPhotos\"\r\n        :key=\"index\"\r\n        :class=\"{ col1: index === 0, col2: index === 1, col3: index === 2 }\"\r\n      >\r\n        <GalleryItem\r\n          v-for=\"photo in splitPhoto\"\r\n          :key=\"photo.id\"\r\n          :photo=\"photo\"\r\n        />\r\n      </div>\r\n    </div>\r\n    <div v-if=\"!isLastPage\" class=\"text-center my-10\">\r\n      <Preloader v-if=\"status === 'updating'\" />\r\n      <div\r\n        v-else\r\n        @click=\"onLoadMore\"\r\n        class=\"btn-large waves-effect waves-light grey darken-4\"\r\n      >\r\n        Load more <i class=\"material-icons right\">arrow_forward</i>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapState } from 'vuex'\r\nimport store from '@/store'\r\nimport GalleryItem from './GalleryItem'\r\nimport Preloader from './Preloader'\r\n\r\nexport default {\r\n  name: 'Gallery',\r\n  components: {\r\n    GalleryItem,\r\n    Preloader,\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      splitPhotos: [[]],\r\n      heights: [0],\r\n      cols: null,\r\n    }\r\n  },\r\n\r\n  computed: {\r\n    ...mapState(['heading', 'photos', 'isLastPage', 'status']),\r\n  },\r\n\r\n  methods: {\r\n    onLoadMore() {\r\n      store.dispatch('fetchPhotos', { replace: false })\r\n    },\r\n\r\n    // count new number of columns\r\n    resizeHandler() {\r\n      if (window.innerWidth < 600) {\r\n        this.cols = 1\r\n      } else if (window.innerWidth < 1100) {\r\n        this.cols = 2\r\n      } else {\r\n        this.cols = 3\r\n      }\r\n    },\r\n\r\n    // for adding new items to columns\r\n    resolveCols(newItems) {\r\n      newItems.forEach((photo) => {\r\n        const index = this.indexOfMin(this.heights)\r\n        this.splitPhotos[index].push(photo)\r\n        this.heights[index] += photo.height / photo.width\r\n      })\r\n    },\r\n\r\n    // reset columns and resolve\r\n    resetCols(data) {\r\n      this.splitPhotos = [[], [], []].splice(3 - this.cols)\r\n      this.heights = [0, 0, 0].splice(3 - this.cols)\r\n\r\n      this.resolveCols(data)\r\n    },\r\n\r\n    // returns index of minimum value in array\r\n    indexOfMin(arr) {\r\n      if (arr.length === 0) {\r\n        return -1\r\n      }\r\n\r\n      let min = arr[0]\r\n      let minIndex = 0\r\n\r\n      arr.forEach((item, index) => {\r\n        if (item < min) {\r\n          min = item\r\n          minIndex = index\r\n        }\r\n      })\r\n\r\n      return minIndex\r\n    },\r\n  },\r\n\r\n  watch: {\r\n    // on photos change resolve with new items\r\n    photos: function(newPhotos, oldPhotos) {\r\n      if (newPhotos.length === 0) {\r\n        this.resetCols([])\r\n        return\r\n      }\r\n\r\n      if (oldPhotos.length > 0 && newPhotos[0].id !== oldPhotos[0].id) {\r\n        this.resetCols(newPhotos)\r\n        return\r\n      }\r\n\r\n      this.resolveCols(\r\n        newPhotos\r\n          .map((p) => p.id)\r\n          .filter((id) => !oldPhotos.find((p) => p.id === id))\r\n          .map((id) => newPhotos.find((p) => p.id === id)),\r\n      )\r\n    },\r\n\r\n    // on columns change reset columns\r\n    cols: function(newCols, oldCols) {\r\n      if (newCols !== oldCols) {\r\n        this.resetCols(this.photos)\r\n      }\r\n    },\r\n  },\r\n\r\n  // remove widow resize listener\r\n  destroyed() {\r\n    window.removeEventListener('resize', this.resizeHandler)\r\n  },\r\n\r\n  // add listener and run one time\r\n  created() {\r\n    window.addEventListener('resize', this.resizeHandler)\r\n    this.resizeHandler()\r\n  },\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\"></style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Gallery.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Gallery.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Gallery.vue?vue&type=template&id=badec894&\"\nimport script from \"./Gallery.vue?vue&type=script&lang=js&\"\nexport * from \"./Gallery.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}